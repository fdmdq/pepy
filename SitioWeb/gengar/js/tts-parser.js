/*!
 *                      2022
 * All Rights Reserved for Oziku Technologies LLC
 *            https://www.oziku.tech/
 */


const ignoreTags="select, textarea, button, label, audio, video, dialog, embed, menu, nav, noframes, noscript, object, script, style, svg, aside, footer, #footer, .no-read-aloud",paragraphSplitter=/(?:\s*\r?\n\s*){2,}/;function getTextNodes(){var e="h1, h2, h3, h4, h5, h6, p, a[href], select, textarea, button, label, audio, video, dialog, embed, menu, nav, noframes, noscript, object, script, style, svg, aside, footer, #footer, .no-read-aloud",t=function(e){return 3==e.nodeType&&e.nodeValue.trim().length>=3},i=function(e){return 1==e.nodeType&&$(e).is("p:visible")&&getInnerText(e).length>=50},n=function(e){return someChildNodes(e,t)&&getInnerText(e).length>=50},r=function(e){return someChildNodes(e,i)},o=function(t){var i=$(t).children(":not("+e+")").get();return i.some(n)||i.some(r)||i.some(o)},s=function(e,t){t&&$(e).data("read-aloud-multi-block",!0),d.push(e)},a=function(){if($(this).is("dl"))s(this);else if($(this).is("ol, ul")){var t=$(this).children().get();t.some(n)?s(this):(t.some(r)||t.some(o))&&s(this,!0)}else if($(this).is("tbody")){var i=$(this).children();i.length>3||i.eq(0).children().length>3?i.get().some(o)&&s(this,!0):i.each(a)}else n(this)?s(this):r(this)?s(this,!0):$(this).children(":not("+e+")").each(a)},d=[];return a.call(document.body),d.filter((function(e){return $(e).is(":visible")&&$(e).offset().left>=0}))}function someChildNodes(e,t){for(var i=e.firstChild;i;){if(t(i))return!0;i=i.nextSibling}return!1}function getInnerText(e){var t=e.innerText;return t?t.trim():""}function findHeadingsFor(e,t){for(var i=[],n=getHeadingLevel($(e).find("h1, h2, h3, h4, h5, h6, p").filter(":visible").get(0)),r=previousNode(e,!0);r&&r!=t;){var o=$(r).is(ignoreTags);if(!o&&1==r.nodeType&&$(r).is(":visible")){var s=getHeadingLevel(r);s<n&&(i.push(r),n=s)}r=previousNode(r,o)}return i.reverse()}function getHeadingLevel(e){var t=e&&/^H(\d)$/i.exec(e.tagName);return t?Number(t[1]):100}function previousNode(e,t){return $(e).is("body")?null:1==e.nodeType&&!t&&e.lastChild?e.lastChild:e.previousSibling?e.previousSibling:previousNode(e.parentNode,!0)}function getTexts(e,t){var i=$(e).find(":visible").filter(dontRead).hide();let n;return $(e).find("ol, ul").addBack("ol, ul").each(addNumbering),n=$(e).data("read-aloud-multi-block")?$(e).children(":visible").get().map(((e,i)=>getText(e,t,i))):getText(e,t,0).split(paragraphSplitter),$(e).find(".read-aloud-numbering").remove(),i.show(),n}function dontRead(){var e=$(this).css("float"),t=$(this).css("position");return $(this).is(self.ignoreTags)||$(this).is("sup")||"right"==e||"fixed"==t}function addNumbering(){var e=$(this).children(),t=e.length?getInnerText(e.get(0)):null;t&&!t.match(/^[(]?(\d|[a-zA-Z][).])/)&&e.each((function(e){$("<span>").addClass("read-aloud-numbering").text(e+1+". ").prependTo(this)}))}function getText(e,t,i){const n=addMissingPunctuation(e.innerText).trim();return $(e).attr("data-read-aloud-highlight-index",`${t}-${i}`),n}function addMissingPunctuation(e){return e.replace(/(\w)(\s*?\r?\n)/g,"$1.$2")}